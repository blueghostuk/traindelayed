@{
    Layout = "~/_Layout.cshtml";
}
@using System.Web.Optimization;
@using System.Configuration;
@section CustomCss{
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }

        .sidebar-nav {
            padding: 9px 0;
        }

        .span12 {
            padding-left: 25px;
        }

        @@media (max-width: 979px) {
            div.pagination {
                font-size: small !important;
                margin-bottom: 5px;
            }
        }
    </style>
}
@section TopMenu{
    <li><a href="/">Home</a></li>
    <li class="active"><a>Search Results</a></li>
}
<div class="row-fluid">
    <div class="span12">
        <div class="row alert alert-info hide" id="no-results-row">
            <strong>No Results Found</strong>
        </div>
        <div class="row alert alert-error hide" id="error-row">
            <strong>Error fetching data. Please Refresh to try again</strong>
        </div>
        <div class="progress progress-striped active hide">
            <div class="bar" style="width: 100%"></div>
        </div>
        <div class="row pagination" id="title" style="margin-top: 5px; font-size: large; text-align: center;" data-bind="visible: text">
            <ul>
                <li style="width: 5em;"><a href="#" id="neg-2hrs">&lt; Earlier</a></li>
                <li class="stationName" style="font-weight: bold; text-align: center;"><span data-bind="text: text"></span></li>
                <li style="width: 5em;"><a href="#" id="plus-2hrs">Later &gt;</a></li>
            </ul>
        </div>
        <div class="row">
            <table class="table table-hover table-bordered table-header-colour" id="search-results">
                <thead>
                    <tr>
                        <th colspan="4"></th>
                        <th colspan="3" title="This is your 'from' station">Calling At</th>
                        <th colspan="4" title="This is your 'to' station">Calling At</th>
                        <th></th>
                    </tr>
                    <tr>
                        <th title="ID of this train">ID</th>
                        <th title="Train Operating Company">TOC</th>
                        <th title="Where the train started">From</th>
                        <th title="Where the train was going to">To</th>
                        <th title="This is your 'from' station">Station</th>
                        <th class="phone-hide" title="This is the published departure time">Expected Departure</th>
                        <th class="phone-show" title="This is the published departure time">Exp. Dept.</th>
                        <th class="phone-hide" title="This is the actual departure time (if known)">Actual Departure</th>
                        <th class="phone-show" title="This is the actual departure time (if known)">Act. Dept.</th>
                        <th title="This is your 'to' station">Station</th>
                        <th class="phone-hide" title="This is the published arrival time">Expected Arrival</th>
                        <th class="phone-show" title="This is the published arrival time">Exp. Arr.</th>
                        <th class="phone-hide" title="This is the actual arrival time (if known)">Actual Arrival</th>
                        <th class="phone-show" title="This is the actual arrival time (if known)">Act. Arr.</th>
                        <th title="How many minutes early/late was the train from the published schedule">Delay</th>
                        <th title="Link to TOC Website (maybe direct to claim form PDF/Web Form)">Web Link</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: $data">
                    <tr data-bind="css: { info: changeOfOrigin, error: cancelled }, attr: { Title: title }">
                        <td><a data-bind="text: headcode, attr: { href: url }" target="_blank" title="View this train in full on another website"></a></td>
                        <td data-bind="text: tocCode, attr: { title : tocName }"></td>
                        <td>
                            <!-- ko if: changeOfOrigin -->
                            <span data-bind="text: originStation" class="stationName" style="text-decoration: line-through;"></span>
                            <br />
                            Starts from <span data-bind="text: changeOfOriginStation" class="stationName"></span>
                            <!-- /ko -->
                            <!-- ko if: !changeOfOrigin -->
                            <span data-bind="text: originStation" class="stationName"></span>
                            <!-- /ko -->
                        </td>
                        <td data-bind="text: destStation" class="stationName"></td>
                        <td data-bind="text: fromStation" class="stationName"></td>
                        <td data-bind="text: expectedDeparture"></td>
                        <td data-bind="text: actualDeparture"></td>
                        <td data-bind="text: toStation" class="stationName"></td>
                        <td data-bind="text: expectedArrival"></td>
                        <td data-bind="text: actualArrival"></td>
                        <td data-bind="text: delay"></td>
                        <td><a data-bind="text: tocName, attr: { href: tocUrl }, visible: tocUrl" target="_blank" title="Go to Train Operating Company Website"></a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
@section FooterJs{
    <script type="text/javascript">
        var server = "@System.Configuration.ConfigurationManager.AppSettings["server"]";
        var apiPort = "@System.Configuration.ConfigurationManager.AppSettings["apiPort"]";
    </script>

    @Scripts.Render("~/bundles/search-results")
}
